{"version": 3,"file": "",
"sourceroot": "",
"sources": ["seckill/pages/index/index.js"],
"names": ["app","getApp","core","requirejs","$","Page","data","audios","audiosObj","roomid","timeindex","taskid","timeid","timer","goods","rooms","room_num","times","time_num","advs","adv_num","list_error","goods_error","message","lasttime","hour","min","sec","diypages","seckill_style","seckill_color","color","red","blue","purple","orange","pink","swiperheight","onLoad","$this","this","wx","getSystemInfo","success","res","model","indexOf","setData","height","windowWidth","get","ret","error","undefined","items","each","id","item","length","background_color","setNavigationBarColor","frontColor","titlebarcolor","backgroundColor","setNavigationBarTitle","title","page_title","getGoods","selected","e","currentTarget","dataset","current","index","initTimer","slide","i","status","parseInt","starttime","endtime","clearInterval","approot","globalData","request","url","x","currenttime","Date","header","setTimer","setTimerInterval","formatSeconds","value","theTime","theTime1","theTime2","seckillinfo","setInterval","play","item_id","target","innerAudioContext","createInnerAudioContext","onPlay","Time","width","currentTime","duration","minute","Math","floor","ceil","second","toFixed","slice","seconds","time","audiowidth","audiotime","src","audio","pausestop","loopplay","onEnded","paused","loop","pauseOther","seek","pause","obj","navigate","phone","appid","appurl","navigateTo","fail","switchTab","makePhoneCall","phoneNumber","navigateToMiniProgram","appId","path","tabwidget","dataurl","type","list","showmore"],
"mappings": "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",
"sourcesContent": ["var app = getApp();\r\nvar core = app.requirejs('/core');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        audios: {},\r\n        audiosObj:{},\r\n\r\n        roomid: '0',\r\n        timeindex: '0',\r\n        taskid: '0',\r\n        timeid: '0',\r\n        timer: 0,\r\n\r\n        goods: '',\r\n\r\n        rooms: '',\r\n        room_num: 0,\r\n\r\n        times: '',\r\n        time_num: 0,\r\n\r\n        advs: '',\r\n        adv_num: 0,\r\n\r\n        list_error: 0,\r\n        goods_error: 0,\r\n        message: '',\r\n\r\n        lasttime: 0,\r\n        hour: '-',\r\n        min: '-',\r\n        sec: '-',\r\n        diypages: '',\r\n        seckill_style:'',\r\n        seckill_color:'',\r\n        color:{\r\n            'red':'#ff5555',\r\n            'blue':'#4e87ee',\r\n            'purple':'#a839fa',\r\n            'orange':'#ff8c1e',\r\n            'pink':'#ff7e95'\r\n        },\r\n      swiperheight:''\r\n    },\r\n    onLoad: function () {\r\n        var $this = this;\r\n        wx.getSystemInfo({\r\n          success: function (res) {\r\n            var model = res.model;\r\n            var iponeX = model.indexOf(\"iPhone X\")\r\n            if (iponeX == '0') {\r\n              $this.setData({\r\n                height:'168rpx'\r\n              })\r\n            } else {\r\n            }\r\n            var swiperheight = res.windowWidth / 1.7\r\n         \r\n            $this.setData({\r\n              swiperheight: swiperheight\r\n            })\r\n          }\r\n        }) \r\n        core.get('seckill/get_list', {}, function (ret) {\r\n            if (ret.error == 1) {\r\n                $this.setData({\r\n                    list_error: 1,\r\n                    message: ret.message\r\n                })\r\n            } else {\r\n              if (ret.diypages.items!= undefined){\r\n                    $.each(ret.diypages.items, function (id, item) {\r\n                        var data = {};\r\n                        if (item.id == 'seckill_advs') {\r\n                            data.adv_num=item.data.length;\r\n                        }\r\n                        data.diypages = ret.diypages;\r\n                        $this.setData(data);\r\n                    });\r\n                }\r\n           \r\n                $this.setData({\r\n                    rooms: ret.rooms,\r\n                    room_num: ret.rooms.length,\r\n                    times: ret.times,\r\n                    time_num: ret.times.length,\r\n                    timeindex: ret.timeindex,\r\n                    roomid: ret.roomid,\r\n                    taskid: ret.taskid,\r\n                    timeid: ret.timeid,\r\n                    // advs: ret.advs,\r\n                    // adv_num: ret.advs.length,\r\n                    seckill_style:ret.seckill_style,\r\n                    seckill_color:ret.seckill_color,\r\n                    background_color: ret.diypages.background_color,\r\n                });\r\n                if (ret.seckill_style == 'style2') {\r\n                  wx.setNavigationBarColor({\r\n                    frontColor: ret.diypages.titlebarcolor,\r\n                    backgroundColor: $this.data.color[ret.seckill_color]\r\n                  })\r\n                  wx.setNavigationBarTitle({\r\n                    title: ret.diypages.page_title\r\n                  })\r\n                }else{\r\n                  wx.setNavigationBarColor({\r\n                    frontColor: '#000000',\r\n                    backgroundColor: '#ffffff'\r\n                  })\r\n                }\r\n                $this.getGoods(ret.timeid);\r\n            }\r\n        });\r\n\r\n    },\r\n    selected: function (e) {\r\n        var $this = this;\r\n        $this.setData({roomid: e.currentTarget.dataset.id});\r\n        var roomid = e.currentTarget.dataset.id;\r\n        core.get('seckill/get_list', {roomid: roomid}, function (ret) {\r\n\r\n            if (ret.error == 1) {\r\n                $this.setData({\r\n                    list_error: 1,\r\n                    message: ret.message\r\n                })\r\n            } else {\r\n                $this.setData({\r\n                    rooms: ret.rooms,\r\n                    times: ret.times,\r\n                    time_num: ret.times.length,\r\n                    timeindex: ret.timeindex\r\n                });\r\n            }\r\n            $this.getGoods(ret.timeid);\r\n        });\r\n\r\n    },\r\n    current: function (e) {\r\n        var $this = this;\r\n        $this.getGoods(e.currentTarget.dataset.timeid);\r\n        $this.setData({timeindex: e.currentTarget.dataset.index});\r\n    },\r\n\r\n\r\n    getGoods: function (timeid) {\r\n        var $this = this;\r\n        core.get('seckill/get_goods', {\r\n            taskid: $this.data.taskid,\r\n            roomid: $this.data.roomid,\r\n            timeid: timeid\r\n        }, function (ret) {\r\n\r\n            if (ret.error == 1) {\r\n                $this.setData({\r\n                    goods_error: 1,\r\n                    message: ret.message\r\n                })\r\n            } else {\r\n\r\n                $this.setData({\r\n                    goods_error: 0,\r\n                    goods: ret.goods\r\n                });\r\n                $this.initTimer(timeid);\r\n            }\r\n\r\n\r\n        })\r\n    },\r\n\r\n\r\n    initTimer: function (timeid) {\r\n        var $this = this;\r\n\r\n        var slide = '';\r\n        $.each($this.data.times, function (i, item) {\r\n            if (item.id === timeid) {\r\n                slide = item;\r\n            }\r\n        });\r\n\r\n        var status = parseInt(slide.status);\r\n        var starttime = slide.starttime;\r\n        var endtime = slide.endtime;\r\n\r\n        clearInterval($this.data.timer);\r\n\r\n        if (status != -1) {\r\n\r\n            var lasttime = 0;\r\n            var timer = 0;\r\n\r\n            var approot=app.globalData.approot;\r\n            wx.request({url:approot+'map.json',\r\n                success: function(x) {\r\n                    var currenttime = new Date(x.header.Date) / 1000;\r\n                    if (status == 0) {\r\n                        lasttime = endtime - currenttime;\r\n                    } else {\r\n                        lasttime = starttime - currenttime;\r\n                    }\r\n\r\n                    $this.setData({lasttime: lasttime});\r\n\r\n                    $this.setTimer(slide);\r\n                    timer = $this.setTimerInterval(slide);\r\n\r\n                    $this.setData({timer: timer});\r\n                }\r\n            })\r\n        }\r\n    },\r\n    /*timer.js文件方法*/\r\n    formatSeconds: function (value) {\r\n        var theTime = parseInt(value);\r\n        var theTime1 = 0;\r\n        var theTime2 = 0;\r\n        if (theTime > 60) {\r\n            theTime1 = parseInt(theTime / 60);\r\n            theTime = parseInt(theTime % 60);\r\n            if (theTime1 > 60) {\r\n                theTime2 = parseInt(theTime1 / 60);\r\n                theTime1 = parseInt(theTime1 % 60)\r\n            }\r\n        }\r\n        return {\r\n            'hour': theTime2 < 10 ? '0' + theTime2 : theTime2,\r\n            'min': theTime1 < 10 ? '0' + theTime1 : theTime1,\r\n            'sec': theTime < 10 ? '0' + theTime : theTime\r\n        }\r\n    },\r\n    setTimer: function (seckillinfo) {\r\n        var $this = this;\r\n        var lasttime=0;\r\n        //每十秒请求一次服务器，获取时间\r\n        if (seckillinfo.status != -1) {\r\n            if(parseInt($this.data.lasttime)%10==0){\r\n                var approot=app.globalData.approot;\r\n                wx.request({url:approot+'map.json',\r\n                    success: function(x) {\r\n                        var currenttime = new Date(x.header.Date) / 1000;\r\n                        if (seckillinfo.status == 0) {\r\n                            lasttime = seckillinfo.endtime - currenttime;\r\n                        } else {\r\n                            lasttime = seckillinfo.starttime - currenttime;\r\n                        }\r\n                        $this.setData({lasttime: lasttime});\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        lasttime = parseInt($this.data.lasttime) - 1;\r\n        var times = $this.formatSeconds(lasttime);\r\n        $this.setData({lasttime: lasttime, hour: times.hour, min: times.min, sec: times.sec});\r\n        if (lasttime <= 0) {\r\n            $this.onLoad();\r\n        }\r\n    },\r\n    setTimerInterval: function (seckillinfo) {\r\n        var $this = this;\r\n        return setInterval(function () {\r\n            $this.setTimer(seckillinfo);\r\n        }, 1000);\r\n    },\r\n\r\n    play: function (e) {\r\n        var item_id = e.target.dataset.id;\r\n        var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n        if (!innerAudioContext) {\r\n            innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n            var audiosObj = this.data.audiosObj;\r\n            audiosObj[item_id] = innerAudioContext;\r\n            this.setData({\r\n                audiosObj: audiosObj\r\n            })\r\n        }\r\n        var $this = this;\r\n        innerAudioContext.onPlay(() => {\r\n            var Time = setInterval(function () {\r\n                var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n                var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n                var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n                var seconds = Math.ceil(innerAudioContext.currentTime)\r\n                var audioicon = ''\r\n                if (minute < 10) {\r\n                    minute = \"0\" + minute;\r\n                }\r\n                var time = minute + \":\" + second;\r\n                var audios = $this.data.audios;\r\n                audios[item_id].audiowidth = width;\r\n                audios[item_id].Time = Time;\r\n                audios[item_id].audiotime = time;\r\n                audios[item_id].seconds = seconds;\r\n                $this.setData({ audios: audios })\r\n            }, 1000)\r\n        })\r\n\r\n        var src = e.currentTarget.dataset.audio;\r\n        var time = e.currentTarget.dataset.time;\r\n        var pausestop = e.currentTarget.dataset.pausestop;\r\n        var loopplay = e.currentTarget.dataset.loopplay;\r\n        if (loopplay == 0) {\r\n            innerAudioContext.onEnded((res) => {\r\n                audios[item_id].status = false;\r\n            $this.setData({ audios: audios })\r\n        })\r\n        }\r\n        var audios = $this.data.audios;\r\n\r\n        if (!audios[item_id]) {\r\n            audios[item_id] = {};\r\n        }\r\n        if (innerAudioContext.paused && time == 0) {\r\n            innerAudioContext.src = src;\r\n            innerAudioContext.play();\r\n            if (loopplay == 1) {\r\n                innerAudioContext.loop = true;\r\n            }\r\n            audios[item_id].status = true;\r\n            $this.pauseOther(item_id)\r\n\r\n        } else if (innerAudioContext.paused && time > 0) {\r\n            innerAudioContext.play();\r\n            if (pausestop == 0) {\r\n                innerAudioContext.seek(time);\r\n            } else {\r\n                innerAudioContext.seek(0);\r\n            }\r\n            audios[item_id].status = true;\r\n            $this.pauseOther(item_id)\r\n        }\r\n        else {\r\n            innerAudioContext.pause();\r\n            audios[item_id].status = false;\r\n        }\r\n        $this.setData({ audios: audios })\r\n    },\r\n    pauseOther: function (item_id) {\r\n        var $this = this;\r\n        $.each(this.data.audiosObj, function (id, obj) {\r\n            if (id == item_id) {\r\n                return;\r\n            }\r\n            obj.pause();\r\n            var audios = $this.data.audios;\r\n            if (audios[id]) {\r\n                audios[id].status = false;\r\n                $this.setData({ audios: audios });\r\n            }\r\n        });\r\n    },\r\n    navigate: function (e) {\r\n        var url = e.currentTarget.dataset.url\r\n        var phone = e.currentTarget.dataset.phone\r\n        var appid = e.currentTarget.dataset.appid\r\n        var appurl = e.currentTarget.dataset.appurl\r\n        if (url) {\r\n            wx.navigateTo({\r\n                url: url,\r\n                fail:function(){\r\n                    wx.switchTab({\r\n                        url: url\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        if (phone) {\r\n            wx.makePhoneCall({\r\n                phoneNumber: phone\r\n            })\r\n        }\r\n        if (appid) {\r\n            wx.navigateToMiniProgram({\r\n                appId: appid,\r\n                path: appurl\r\n            })\r\n        }\r\n    },\r\n    // 选项卡切换\r\n    tabwidget: function (e) {\r\n        var $this = this,\r\n            diypages = $this.data.diypages,\r\n            list = diypages.items,\r\n            id = e.currentTarget.dataset.id,\r\n            dataurl = e.currentTarget.dataset.url,\r\n            type = e.currentTarget.dataset.type;\r\n\r\n        if (dataurl == '' || dataurl == undefined) {\r\n            return;\r\n        }\r\n\r\n        core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n\r\n            for (var i in diypages.items){\r\n                if(i == id){\r\n                    diypages.items[i].data[type].data = ret.goods.list;\r\n                    diypages.items[i].data[type].type = ret.type;\r\n                    diypages.items[i].type = ret.type;\r\n                    diypages.items[i].status = type;\r\n                    if (ret.goods.list.length <= 8) {\r\n                        diypages.items[i].data[type].showmore = true;\r\n                    }\r\n                   \r\n                    $this.setData({ diypages: diypages})\r\n                }\r\n            }\r\n            // $this.setData({ tabbarData: ret.goods, tabbarDataType:ret.type})\r\n        });\r\n    },\r\n})"]}